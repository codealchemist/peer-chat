(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(e,t,n){e.exports=n(394)},156:function(e,t,n){},318:function(e,t){},320:function(e,t){},336:function(e,t){},359:function(e,t,n){var a={"./background.jpg":360,"./background1.jpg":361,"./background10.jpg":362,"./background11.jpg":363,"./background12.jpg":364,"./background13.jpg":365,"./background14.jpg":366,"./background15.jpg":367,"./background16.jpg":368,"./background17.jpg":369,"./background18.jpg":370,"./background19.jpg":371,"./background2.jpg":372,"./background20.jpg":373,"./background21.jpg":374,"./background22.jpg":375,"./background23.jpg":376,"./background24.jpg":377,"./background25.jpg":378,"./background26.jpg":379,"./background27.jpg":380,"./background28.jpg":381,"./background29.jpg":382,"./background3.jpg":383,"./background30.jpg":384,"./background31.jpg":385,"./background32.jpg":386,"./background33.jpg":387,"./background4.jpg":388,"./background5.jpg":389,"./background6.jpg":390,"./background7.jpg":391,"./background8.jpg":392,"./background9.jpg":393};function r(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=359},360:function(e,t,n){e.exports=n.p+"static/media/background.c9f543ff.jpg"},361:function(e,t,n){e.exports=n.p+"static/media/background1.7710c20b.jpg"},362:function(e,t,n){e.exports=n.p+"static/media/background10.4870880e.jpg"},363:function(e,t){e.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxMSEhUSExIVFhUXFhUXFxcXFxUVGBcWFRUXFxgYFRcYHSggGBolHRcXITEhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OFxAQFy0dHR0rLS0rLS0tKystKy0rLS0tKy0rLS0tLSsrLS0tLS0tLS0tLSstLSstLSsrKystKy0tK//AABEIAKgBLAMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAADAAECBAUGBwj/xAA9EAABAwIEBAQEBAUDAwUAAAABAAIRAyEEEjFBBQZRYRMicYEykaHwQrHB0QcUUuHxI2KCQ3OSFiQzU2P/xAAZAQADAQEBAAAAAAAAAAAAAAAAAQIDBAX/xAAhEQEBAQEBAAIBBQEAAAAAAAAAARECIQMSMRMiMkFRUv/aAAwDAQACEQMRAD8A8PhOnITAJhNjwA4FskxB6KKaFJAJJJOmCCkmClKYGwuGLzbTc/oO63WYRlBofVOUatZ+N/cdp30WnytgmuoB7crn3Aaf/snV4/p3nouX4tSrioTXDs5JudPQdB2T33Bhsfj3VToGtGjRoO56nW/dVgEwClCqQhhh7E9ifkhtCl4riImyJSbCrCPToudoCeyfwHaZTPofqujwPDi2QIYKYmo8iYzaBoOp2CtYSi1pzOJe4xJcfkAOiWptxyQYpBq7ir/LPgVaUSYL2CDHX/K5/jfCxRf5Hh9N12OB27jYonW0ayMqQai5VJrU6EQxM5qKQomoIusr6uRUqBBcj1TOiH4ZKrBaDCbKjZESlRlGFqrkWjh61Pwsrm+a8GNZ0unGHUatBGDWeWqMKy5iG5iWGDCUIuRSNO0owA5UsqKQopYYcKRCRTygIhOkkkFYKUKKmwoBg0p8pRGkKzTpjLMeg/dCpFMMPRMtfCAg7K3xTh4fSNUNh7ILosHNJAkjqJF0xY55SaJTI1AKiW+F42rQdnpvLTaY0PYjQhdKzmZtUZcRS2jM3S5kkjXUD5ey5+nTCJ4I6qfKMdC7lmjiGl2HqBsNmInM4Rb/AGl17dlylfCFhLXNIcCQZ2INwtrg9Y0qgIfb3sdj2K6fmLhNIsbiCAwPaGhxn/5AL5hroPoj7fW5U487p0SVZbhyIJFl01Chh2smo9pkba9j2WfiqrXvcWGm2nYNF7CN/Lc76qp8svkK802KqtdRkmXAtaNjlh0uv0hoUcBi3DUlw+qnSwoe6PEpjWJzR+WpVilwg9QPZw/Syi/JB9d/LZbTBaHD1AOkFsyeusQn41wxv8nTcB52uM9w/ttorvBuW6hqUhUcwyQGNk7EagjSD9Qui5w4MKVBtPO2XEE32bP6lc3fy2985/rTniSevIn0kssLar4CN2rNxVOBqur9TWc5UnlAeVN7kNXILQnLawFFpYCL9eyx3BO0kaEj0TTqzjWAOsnwbdVVCsUnQZSGrMJqjbKXjBDqVEaam5t1BzVYLVAhI9V8ictVhrFF7U8Gq5CgQjEKDgpMGE0IkJiEjQhJShKEBTUgmTgJBJrlaa6YAKqjsiUKpaZj2TkOVtYWicw9l0fEaobg6tV5lzmCkIAAJcQIHcNBPsuewvGKTYJpvJA0GUCfUqnxXiz8RAcA1jZyMbo2d76nunOfdVazAj0SBCE1qJTF1eJa2EoF9mke6uVuDVmkCM0gfDLoJvBHUBNys6n4ozvDIa5wMZhIEgEantG67nl/BHwS9ri95d5plpykCNbgSIulnpWuJxHDX0w0VC1uaAPxHzaSNlrcQ4mG4X+TfDrtO3oDbf8AVZHG8JiGvNR4cIcTJmDlvqdVVplzmmo4/Fp6Cwj6lT31JCktM+pJjaw9Z/wp06DRrIHY/oi+G1tJwNPOXZS14Jlhv5SOpifRO1pcWyfiEm5MmCZM76LK8/8AJ/b/AEXF0aVANcxzi8gGXWykG8DoPe59VZ4DUrYmuKfxuf8A1GYt8TugFvZYtYZ3EOkxa5vY2CKyt4MuDjcRa0HoVchV6By3jHDFUTWkupGpkFMh+dwY7yR7CCDFln8Yx9as41Ksz3sB2AQ+WaQLqeZ2UNc1+fTKWkQSem3/AC9U/O9b/wB1UaLNEEQcw8zQ6QdxdF+OSp+9sYdess2vVR67TAcRY6HrCpPKrnk9DcU0KUSmWjO1F6aFJNCQIBEYoQiNCQEAThqTQitpowGp073ScATcIzKaiKBJVQrVc9kN4Vx9CFXqNSqoqkKBajkKBCloAWqJajEJi1SYMJoRSE2VAUIUg1TDU7UQGyqTaak6ymxXIYeVLKjsClVp5TFtAZ9RKqQ1QhOjgff0+dyk2hPT67qpCodMkX0WtgOO4mjPh13Nt1Gnvrrp+yDS4YTutMYShTEvuenUoyIq/wD+oq+Jo1KddzXhwDW/6dNrp1Li8NDidonfssjEPbTeGubmaDoDFth+W4RsPimmox2UNa2Tl1GoEn3P0Wdj6k1Xum0/4Cw7m9Z/jSfxazW0jGWo4aQDIvEadVB9IATuOn5+qyabiXAdSFp1ZMNJid52F1l3LepC5ySpm4DzGYAzGpJ0B2WRjKL8odl8sxmGhOt16ry3yxTfgiaxirUa+tTG4a0ZWl1rjU/8go8V4PRGAqggE5WhrmxDnAjKB3Bue0o/Vt6zPwc5kmuE4bxR7WtYA28BwcMwc2fhI9Fs831GOrZ6bA1rmiANDEiY2sAsThHD3vqtaGkHMAbfDfU/mvQcTy4cRh6uRrA5r/IR5s3+3MdBFp08tlvb+IxzK80quVZ6NiWlpIcCCLEEQQfRBOk99Pv7srKoylKUpkFhJ1Ep2lB4mArFCjKBTC1KbICR4H4MIlNiKwSQFMtGyCqPh2TeIGx1CJKr1xZFpYFXqySgOUoTOU6rAXNUMqMWpBiSorliiWqzkUSxLTVS1NlVktUcqRqACiR9/wBlMBOArikKVOVPJlsVLKo1ex0VwhKaJCrNRAD9+iqQCItJ0ffogtcoOcqKrxxpFgb/AEhAqPLjJMqFBafD+HCoJzRtoTt21U24g2EqMJDHsgkZQ8TpILZGhuInVB4hhhmLQ4HzT6+vddZgOWC0F9SozK1rXay4Oc45RH/En5LnOJVvDJptaI1zaudfedOizsluxX2yZVbBYczJGiJijmIAtDSSTAA6kn0T4XGNsHHLp7f2RsUKIew1Gkj8RFw8TIyjT1B1WP1v209mY9hxFLPh8PRaf9apRY11RtsrCPLYGwmBA1hcpzxifBe3CAiKbQXBth4jhM94EX7k7pch8QNWu+u4kEH4bWAFotBcQRcdQLKHNDRis2IAh+YkjW0wBbt+SPj5y+l1+GDwsUnva17/AAyCIcNJkQHjQiV6BhcQ+g0keYEw6RExfy9AvLM14dbb7C6Tg3MhpNFOo8PpEwDuzpfdvY6LbE9TVbnnD+JVFTI1rnjOSC45y5xEOtDTp6rjiF3fGT4sZXMF25W52EuLQQHG8NaNbndc9W4bUz+dlj+IQJPYixnqj7SFJWNCbKtXF8GqU6bapENcSBO8Xkb/AGVTMI+2/hf1VgEgEQtTinKeliVHULUbosoCCtGncJ0Qam7siNHVRo00dyEhEQgVd1Yc4jSyqVSVFp4C5QyKafKpPEMqcMRAxEa1LVSAmmoli0qGFzXRH4IInovjFcxQLVoV8PCrFim+HGeKSc01apMF59vXupimtZQz3NmybwwIMK1UpxKqvMK4DEBDJTOThh1VwCNCi+FFrSbK3/LW6whNV6bTE7fdlrcGDy4Bk69JA3kjoELDtlwa3QwIIiXGJAjuu0phmFoeXX/qOE+Yn8I6tF/WFNviUOP4IYeaQIbnILpgxUiYt0vvuVw7gS5wdO/eP7LU4nxJtUvDiS+SWObN50B7rp+WOUzVaXYplSQGEGYEEWFhIOn7LPruSCS159/LuN/uNP2WthqZc11NzZbaJ8pBsLHpN1qcVoU2veaLiXB4a0G7Xg2N7RcfVU8Lnt4ogzAA6WVc+1PVyOu5B4Y9z20m1QGk75JiHWyhwcSCbOg95CoMa7DvqYd8+RxbB7K1yThKX8yH1Hva5kFuWPM4SWiDrcbKhzvicuMqRecl++Rs/VRl+9i+csY3HWeaRosqkb6LSxWKDrx7LLeY0W8hVapYgN1aP0V6hxqLNEC2tyMpny9FhEpm6qbxBroON8dfiNg1ggATNg6oRc/9wj5LEcUnOlSYN+iqcyeQvsGUSkU72k3OqnSZCV50aYNurNAXhM2ndWAQLKcPVoG1lF7rINWtsAkKk6pdCGL0J105CcRHdY2rwKFIBThEZTnZTelTlEMRabFNtFWKVJRauRcY2BCZzUejBF9kJzR1Vc9eo65UsUyyzjTWpXSZgpGh7/cJfJ16rnnxz9JHaFXYrDCtkIvpqrWoW0WjKnTaAZInX+yqU2H4UbXUmCddvqVdq0YTYahutJ0EadATOiMaEXVqlaN1cxuKZQYx72Z3Ony3DmNBs7uT32U3pNW+G8D8N1PEVXQwXyC7i9sgCIt1lVuY6TjRBGhOZzYIcRNo9PTdbPLjn40gNBNOSdAS0zcT1uuhdy480qtANz1KeY0ydS0OmNLyNPVT13Pwz9vrzjk3gwxNdoa4gBwkAS4D8LvTNAPqvUOcMU3A4QYdrj4tQQeraY1IGgn4fmqHDMLR4cGY7xMr3Ucoo6+K7O6/VoEA9o7rkuYONOxL3VqhBc52wsGgaAdAs+OL31t/Ea7kZ1bFgNMN9LAlu4M9RCFw6nmYXPqEmba6K1iaM0g2MpdBbA6E69JQ+EUKlNji5okus0axGp/stt/cy6njuuRaTG1WOJJbINxN2kGx2MwuX/iYwNx9YNEAFsDtlGq6r+Gmd2IaYMNzHci4iB0/suQ/iPUzY/EH/wDV/wBLfoifzHx/xcoaiiXJFMVqZiptanqEE2ECBv7fmmTCTgpBMCpqSTaVJrlFrURoStGJhykEgLKbAp05DOTgqZQ3NWXVVIdzkmqICmAseq05gtJkq1SpdksPRWhRpSsr02kVqVGUZlIyFa8AQANjqpV8K4XmUTrRZilV1N91EmdEUtV3hfDzUdF43PXsJT66nMTJrNpUCSFddQc0wBmjcCxW5iuBZPhmNY3j29lZohgER9f7LC/N/i5w8rp0idApN6JYetlSJ3XoOYWVPdCDk4emYj0KYMKZel4tMeZ7iAL5Rqb6A7I0mpQaGNFZwGQGL/jcBOUDfv2VOlw2pjXueGvcQMzmgzlE3ydRtE2kbLW4Bw6vxKpD2inh6bbGPIxsiRmjUi8roMZzDhMBLcGPEqBoHiWFMG8kAfGYJEnqpt/qBb5G4M7h+Jw7cxIrsIeCIuIIIHaY9l2/NPMuGwUOe4GoIim34iL6/wBOu68Lq83YgvzeK8HQOaWgtb0BAlo9FUpNdWdd8k3m5Pv3S4+Kyfuujq7fFvmXmB2LrOqEZRfK0aNBMwPckzuSicDwYeJqkBp0zfitsdgo1WUqDZLA9x+GdImDIPqEDA4ptVxGcBw0Y8xIP9B+9V08985kZ9bI1eJ8QhrWMpw8eWdvf90sBw0YkgRDzuLeb6SFrUeFPxBYfDLQPia6wc3SGk6leq8vcvUKVPM0TnEknWCN+iz66k/COebXN8tcBxOApvql9PI1pc8Pkw1oJIadQfdeNcfx5rV6lU6ve53/AJEr1D+KPO7TTODoOkf9V40cR+FvadSvIX3uq+KX81pmeBkWj7uolqcuSLtvZagm/f3snJTApwhKQCkCmBSCmmOxGCBTPX8+yKCs7TwelVgEJ53QgphZ3pcieVItUUSmFnelSEKfZFp0uycNVyhSB7Qs7WkglDb5LUwLJaZFtVnsbBtcfotKlAbCz6mrlxbwWGk2E/lHdaGJwgdYWtr6dkfgVEnzey16tIRMb/NLnlHfye45V3CBktd2/psfT91qcG4YQBIm4I06brRw2AcZIbbaFf4fQdmyOAEjTpbqs/m98VxQatAusIAiC7U/JVsDhAxuXKHQTeB8l0mG4YCLW/b9VZp4drRlDQe6y/Tyen9nzTQoFwmQo1AQYOoSoV4UarpJK9ZzQ8pSoAqQQaUwJHVTpcOrYl4YxuZ7tLgfM6AIJfC1eBcdbhvEfBc9zMjNg0k3LieltErbniVnjHMfhUGcPokBjLVXtkeI8WP/ABB+cLmhWDjeYt+X7qhUqmUg4+yrnnDX34foJ9xf6rUwlHwBnqPDP6Qfid6DYLCbWeCMlibTvddJwTlp2IeBUkDKHgncWJH1Cq1KrUpnEVGBjCZAgtPmtrmGkbytbE8kuFPxTGZrmkZfOHAkWiJnt1C7TA8NwuEo56vlaMzf97iD8IvLp17W0XM8a56qullA+Ey4BEB5G0uGlukLPL1fBPHe8s8dpUcPGLcwNa05cwOfyOyFjmETNrHp6Ljub/4hOqg0MNNOhewnM6ep2HYLhKtcmSSSTuTdVi+Fpzx6uTxOrVJN5S2m3T6dEN1aynSqWW2pqO6gVKqRqhZ0aMSCkCh5lIJaWCgbypj6oUwptKm08EaitKC0ooKzpyCgqYMKDUQBZdKidICROnbVFYIUAEabLOqgg1R6SDSajNUVbRwVAmewn6q/RwvyWdgqsSIsWrQY8sAc0mb36ArPVY6jg9UUwAdFqGuHaabLleFk1DrPXr9FuUGkENixvdTflnJfpb60G5xDiSBaETD4oudEeY7+8odUFwAmw+/dbHCsEGjP8lz/AHvfXi/rOYt+JkACcEOuhU2ky89YA10UqWUyZi+if2tvv4RkfL6eVEFSles5yCeUycFBmcFWxDVZBG6BiEyZzzcKVOpGiHUUQVRNTC1fOJGmx6T+266Lg/HHmvSEAU2yMsyAHkEAkXIzALjqT40W1y9gmVMQzOSGzeDEnUXmwU9SZobvO3EHvxLw4nKzysGwbA09dVzLnrrP4gsb47bgHwxm+ZifZcU90KuOt5OivqoLqiC56hmVRQxqJg9CLkpT1I2dIOQpTg9UaBg5TBQAUWen3a/slpiZkRqA1FYlaBmjdFphCYreGbJCi0SC06aKKasFmyk9kaHYKfKd8Vi2E7SiOCGAs+pi4sNcRA90YGVWZdHYYIWdU0MKBE/0/utRlUObAFx+X6rFpVSNNDb8v2V7CA2cOsX3WNXGtwbEZXC8AzYCB/ldbQpy3NOmgPdc3gqEkACNzOoG66yuxrabIEEiddRZcfyXa1n9RYwNHMR9hblWzTawA91l4GGUi+SNANTcmFPE4gsda+lvp7blX8f7ONv9sup9uvA8VxA0hb4R1tJNzB+91nM4xQvJe0zcAF1+sgqlx6m4l0lwjo0yO8/iGyyQxpvczdZTq/27OPh5sePtTykkvceSSdMkgzFV65SSTJnVTdRzJJJwkwVZwmKcwyD3HqNwmSVhbxfFH1nl9Rxc4xc9lUxFfMSYAnpYew2TJJWYcBcU07JkkHSzKXumSTI5SBSSQaYUgUkkgI0ozHJkkgOwq3QfBBSSU041TUBghO6rIi1vnf8ANJJRF0JxCQCZJR3fTizh4Fomd+iI2jfVJJY2rwVtNdBy1hGveG1CQ1tzG6SSi088dbgcLT8QkmWNkQJvHdXqOJFV4BpgQLEEgfeidJcfXXti5PNb1bDDwg0bFp/8SHfosWpg61SrUjyiAG3+MxMAbAXkpJLu6+OXIw47s1KtwZ1Sm3/UdnEmZMOMEAX+Fq4x9avTJYaRkEi7QfrCSSx7+Pl1/B8vW2P/2Q=="},364:function(e,t,n){e.exports=n.p+"static/media/background12.e2b9de50.jpg"},365:function(e,t,n){e.exports=n.p+"static/media/background13.67d967c2.jpg"},366:function(e,t,n){e.exports=n.p+"static/media/background14.627e10b8.jpg"},367:function(e,t,n){e.exports=n.p+"static/media/background15.018e1aa4.jpg"},368:function(e,t,n){e.exports=n.p+"static/media/background16.84b50e30.jpg"},369:function(e,t,n){e.exports=n.p+"static/media/background17.6383d3ce.jpg"},370:function(e,t,n){e.exports=n.p+"static/media/background18.017251e1.jpg"},371:function(e,t,n){e.exports=n.p+"static/media/background19.d3f1fb58.jpg"},372:function(e,t,n){e.exports=n.p+"static/media/background2.defe7d35.jpg"},373:function(e,t,n){e.exports=n.p+"static/media/background20.25830afd.jpg"},374:function(e,t,n){e.exports=n.p+"static/media/background21.a88b459b.jpg"},375:function(e,t,n){e.exports=n.p+"static/media/background22.cf471bf1.jpg"},376:function(e,t,n){e.exports=n.p+"static/media/background23.b95ec159.jpg"},377:function(e,t,n){e.exports=n.p+"static/media/background24.c5221388.jpg"},378:function(e,t,n){e.exports=n.p+"static/media/background25.a4dd1795.jpg"},379:function(e,t,n){e.exports=n.p+"static/media/background26.47252b33.jpg"},380:function(e,t,n){e.exports=n.p+"static/media/background27.2c1177fb.jpg"},381:function(e,t,n){e.exports=n.p+"static/media/background28.09d1cb30.jpg"},382:function(e,t,n){e.exports=n.p+"static/media/background29.45dbc75e.jpg"},383:function(e,t,n){e.exports=n.p+"static/media/background3.759424bc.jpg"},384:function(e,t,n){e.exports=n.p+"static/media/background30.70f9a4ae.jpg"},385:function(e,t,n){e.exports=n.p+"static/media/background31.61178f20.jpg"},386:function(e,t,n){e.exports=n.p+"static/media/background32.0c56ad87.jpg"},387:function(e,t,n){e.exports=n.p+"static/media/background33.cd78673a.jpg"},388:function(e,t,n){e.exports=n.p+"static/media/background4.0d76741c.jpg"},389:function(e,t,n){e.exports=n.p+"static/media/background5.f6a355e0.jpg"},390:function(e,t,n){e.exports=n.p+"static/media/background6.579abfd7.jpg"},391:function(e,t,n){e.exports=n.p+"static/media/background7.47b8612f.jpg"},392:function(e,t,n){e.exports=n.p+"static/media/background8.9488fbb1.jpg"},393:function(e,t,n){e.exports=n.p+"static/media/background9.f3f05df6.jpg"},394:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),i=n.n(o),c=(n(156),n(8)),s=n(396),u=n(395),l=n(38),p=n(35),d=n(9),g=n(33),f=n(34),b=n(52),h=n(50),m=n(53),v=n(70),k=n.n(v),y=n(25),x="peer-chat/user/set-id",j=n(397),w=n(140),A=n.n(w),O=n(141),E=n.n(O),N=n(142),C=n.n(N),S=n(43),I=n.n(S),T=n(71),U=n.n(T),B=function(e){return e.user},V=n(41),G=n.n(V),R=n(88),M=n.n(R);function Q(){var e=Object(c.a)(["\n  cursor: pointer;\n  :hover {\n    color: white;\n  }\n"]);return Q=function(){return e},e}function D(){var e=Object(c.a)(["\n  display: flex;\n  flex-wrap: wrap;\n"]);return D=function(){return e},e}function J(){var e=Object(c.a)(["\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n"]);return J=function(){return e},e}var q=["accessibility_new","account_box","account_circle","android","aspect_ratio","autorenew","backup","bookmark","bug_report","build","camera_enhance","card_giftcard","change_history","check_circle","code","copyright","credit_card","dashboard","description","done","drag_indicator","eject","euro_symbol","explore","extension","face","favorite","fingerprint","grade","help","home","hourglass_empty","https","language","lock","lock_open","motorcycle","offline_bolt","pan_tool","pets","power_settings_new","pregnant_woman","room","rowing","stars","verified_user","explicit","flash_on"],F=d.a.div(J()),K=d.a.div(D()),Y=Object(d.a)(G.a)(Q()),L=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isModalOpen:!1},n.openModal=function(){n.setState({isModalOpen:!0})},n.closeModal=function(){n.setState({isModalOpen:!1})},n.selectAvatar=function(e){console.log("selected avatar",e),n.props.setAvatar({avatar:e}),n.closeModal()},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.avatar;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{onClick:this.openModal},r.a.createElement(G.a,{style:{fontSize:"50px"}},a)),r.a.createElement(M.a,{open:this.state.isModalOpen,onClose:this.closeModal},r.a.createElement("div",{className:n.paper},r.a.createElement("h4",null,"SELECT AVATAR"),r.a.createElement(K,null,q.map(function(t){return r.a.createElement(Y,{key:t,style:{fontSize:"50px"},onClick:function(){return e.selectAvatar(t)}},t)})))))}}]),t}(r.a.PureComponent),W={setAvatar:function(e){return{type:"peer-chat/user/set-avatar",payload:e}}},P=Object(y.compose)(Object(p.withStyles)(function(e){return{paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:"rgba(255, 255, 255, 0.8)",color:"black",boxShadow:e.shadows[5],padding:4*e.spacing.unit,outline:"none",top:"20%",left:0,right:0,margin:"auto"}}}),Object(l.b)(function(e){return{avatar:e.user.avatar}},W))(L),z=n(72),H=n.n(z);function Z(){var e=Object(c.a)(["\n  margin: 0 0 10px;\n"]);return Z=function(){return e},e}function X(){var e=Object(c.a)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n\n  @media (max-width: 1024px) {\n    flex-direction: column;\n  }\n"]);return X=function(){return e},e}function _(){var e=Object(c.a)(["\n  h2 {\n    margin: 0 0 10px;\n  }\n\n  p {\n    margin: 30px 10px 10px;\n  }\n"]);return _=function(){return e},e}var $=Object(d.a)(A.a)(_()),ee=d.a.div(X()),te=(Object(d.a)(I.a)(Z()),function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).userId=k()(12),n.state={name:"",openingChat:!1},n.onNameChange=function(e){var t=e.target.value;n.setState({name:t.trim()})},n.createChat=function(){console.log("== create chat =="),n.setState({openingChat:!0}),n.props.setName({name:n.state.name}),n.props.history.push("/chat")},n.onKey=function(e){"Enter"===e.key&&n.state.name&&n.createChat()},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.setUserId({id:this.userId})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement($,{className:e.card},r.a.createElement(E.a,null,r.a.createElement(I.a,{variant:"h5",component:"h2"},"Welcome!"),r.a.createElement(I.a,{color:"textSecondary"},r.a.createElement("b",null,"Peer Chat")," is a peer to peer chat application that uses"," ",r.a.createElement("b",null,"WebRTC data channels")," to send messages between peers."),r.a.createElement(I.a,{component:"p"},"Let's create a new chat!"),r.a.createElement(ee,null,r.a.createElement(P,null),r.a.createElement(U.a,{id:"name",label:"Name",value:this.state.name,onChange:this.onNameChange,margin:"normal",variant:"outlined",onKeyPress:this.onKey,autoFocus:!0}),r.a.createElement("div",{className:e.buttonContainer},r.a.createElement(C.a,{variant:"contained",color:"primary",disabled:!this.state.name||this.state.openingChat,onClick:this.createChat},"Create chat"),this.state.openingChat&&r.a.createElement(H.a,{size:24,className:e.buttonProgress})))))}}]),t}(r.a.PureComponent)),ne={setName:function(e){return{type:"peer-chat/user/set-name",payload:e}},setUserId:function(e){return{type:x,payload:e}}},ae=Object(y.compose)(Object(p.withStyles)({card:{minWidth:300,width:"40%",background:"rgba(0,0,0,0.5)"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},buttonContainer:{position:"relative"}}),Object(l.b)(null,ne),j.a)(te),re=function(){return r.a.createElement(ae,null)},oe=n(145),ie=n.n(oe),ce="peer-chat/chat/send-message",se="peer-chat/chat/send-writing-notification",ue="peer-chat/chat/send-clear-writing-notification",le=function(e){return{type:"peer-chat/chat/add-message",payload:e}},pe=function(){return{type:"peer-chat/chat/send-message-failed"}},de=function(e){return{type:"peer-chat/chat/add-writing-notification",payload:e}},ge=function(e){return{type:"peer-chat/chat/remove-writing-notification",payload:e}},fe=function(e){return e.chat.messages},be=function(e){return e.chat.writingNotifications},he=function(e){return e.signaling.isInitiator},me=function(e){return e.signaling.shareUrl},ve=n(147),ke=n.n(ve),ye=n(146),xe=n.n(ye),je=n(73),we=n.n(je),Ae=function(e){var t=e.avatar;return r.a.createElement(G.a,{style:{fontSize:"50px"}},t)};function Oe(){var e=Object(c.a)(["\n  width: 50%;\n  background: ",";\n  color: #eee;\n  padding: 20px 10px 5px 10px;\n  border-radius: 5px;\n  min-width: 220px;\n  position: relative;\n  word-break: break-word;\n\n  > p {\n    word-break: break-word;\n  }\n\n  :before {\n    content: '';\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 5px 0 5px 7px;\n    border-color: transparent transparent transparent\n      ",";\n    position: absolute;\n    top: 9px;\n    right: -7px;\n\n    ","\n  }\n\n  ","\n"]);return Oe=function(){return e},e}function Ee(){var e=Object(c.a)(["\n  position: absolute;\n  top: 5px;\n  left: 10px;\n\n  p {\n    color: #aaa;\n    font-size: 0.75rem;\n    font-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;\n    font-weight: 400;\n    letter-spacing: 0.03333em;\n    margin: 0;\n  }\n"]);return Ee=function(){return e},e}function Ne(){var e=Object(c.a)(["\n  width: 50%;\n  display: flex;\n  width: 100%;\n  margin: 0 10px;\n  justify-content: flex-end;\n\n  ","\n"]);return Ne=function(){return e},e}function Ce(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  margin-bottom: 5px;\n\n  ","\n"]);return Ce=function(){return e},e}var Se=d.a.div(Ce(),function(e){if("peer"===e.type)return"\n        flex-direction: row;\n      "}),Ie=d.a.div(Ne(),function(e){var t=e.type;return"peer"===t?"\n        justify-content: flex-start;\n      ":"notification"===t?"\n        justify-content: center;\n      ":void 0}),Te=d.a.div(Ee()),Ue=d.a.div(Oe(),"rgba(150, 150, 150, 0.2)","rgba(150, 150, 150, 0.2)",function(e){var t=e.type;return"peer"===t?"\n          border-width: 5px 7px 5px 0;\n          border-color: transparent ".concat("rgba(150, 150, 255, 0.2)"," transparent transparent;\n          left: -7px;\n        "):"notification"===t?"\n        display: none;\n      ":void 0},function(e){var t=e.type;return"peer"===t?"\n        background: ".concat("rgba(150, 150, 255, 0.2)",";\n      "):"notification"===t?"\n        background: rgba(0, 0, 0, 0.2);\n      ":void 0}),Be=function(e){var t=e.user,n=e.text,a=e.date,o=e.type,i=void 0===o?"own":o;return r.a.createElement(Se,{type:i},r.a.createElement(Ae,{avatar:t.avatar}),r.a.createElement(Ie,{type:i},r.a.createElement(Ue,{type:i},r.a.createElement(Te,null,r.a.createElement("p",null,we()(a).format("MMMM Do YYYY, h:mm a"))),r.a.createElement(I.a,null,r.a.createElement("b",null,t.name)),r.a.createElement("span",null,n))))};function Ve(){var e=Object(c.a)(["\n  position: absolute;\n  top: 2px;\n  right: 0px;\n"]);return Ve=function(){return e},e}function Ge(){var e=Object(c.a)(["\n  width: 50%;\n  background: ",";\n  padding: 20px 10px 5px 10px;\n  border-radius: 2px;\n  min-width: 220px;\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n\n  > p {\n    color: #222;\n    font-size: 0.85rem;\n    font-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;\n    font-weight: 400;\n    margin: 0;\n  }\n\n  :before {\n    content: '';\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 12px 0 12px 15px;\n    border-color: transparent transparent transparent ",";\n    position: absolute;\n    top: 0;\n    right: -15px;\n    bottom: 0;\n    margin: auto;\n  }\n\n  :after {\n    content: '';\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 12px 15px 12px 0;\n    border-color: transparent "," transparent transparent;\n    position: absolute;\n    top: 0;\n    left: -15px;\n    bottom: 0;\n    margin: auto;\n  }\n"]);return Ge=function(){return e},e}function Re(){var e=Object(c.a)(["\n  position: absolute;\n  top: 5px;\n  left: 10px;\n\n  p {\n    color: #444;\n    font-size: 0.75rem;\n    font-family: 'Roboto', 'Helvetica', 'Arial', sans-serif;\n    font-weight: 400;\n    letter-spacing: 0.03333em;\n    margin: 0;\n  }\n"]);return Re=function(){return e},e}function Me(){var e=Object(c.a)(["\n  width: 50%;\n  display: flex;\n  width: 100%;\n  margin: 0 10px;\n  justify-content: center;\n"]);return Me=function(){return e},e}function Qe(){var e=Object(c.a)(["\n  display: flex;\n  margin-bottom: 5px;\n"]);return Qe=function(){return e},e}var De=d.a.div(Qe()),Je=d.a.div(Me()),qe=d.a.div(Re()),Fe=d.a.div(Ge(),"rgba(255, 255, 255, 0.5)","rgba(255, 255, 255, 0.5)","rgba(255, 255, 255, 0.5)"),Ke=d.a.div(Ve()),Ye=function(e){var t=e.text,n=e.date,a=e.actionButton,o=void 0===a?"":a;return r.a.createElement(De,null,r.a.createElement(Je,null,r.a.createElement(Fe,null,r.a.createElement(qe,null,r.a.createElement("p",null,we()(n).format("MMMM Do YYYY, h:mm:ss a"))),r.a.createElement("p",null,t),r.a.createElement(Ke,null,o))))};function Le(){var e=Object(c.a)(["\n  position: absolute;\n  top: -1px;\n  right: 10px;\n"]);return Le=function(){return e},e}function We(){var e=Object(c.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return We=function(){return e},e}function Pe(){var e=Object(c.a)(["\n  flex: 1;\n"]);return Pe=function(){return e},e}function ze(){var e=Object(c.a)(["\n  flex: 1;\n  overflow: scroll;\n"]);return ze=function(){return e},e}function He(){var e=Object(c.a)(["\n  width: 100%;\n"]);return He=function(){return e},e}function Ze(){var e=Object(c.a)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n"]);return Ze=function(){return e},e}function Xe(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.5);\n  padding: 20px 20px 0 20px;\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n"]);return Xe=function(){return e},e}function _e(){var e=Object(c.a)(["\n  max-width: 640px;\n  width: 100%;\n  position: absolute;\n  height: calc(100% - 90px);\n  top: 70px;\n\n  @media (max-width: 800px) {\n    max-width: 100%;\n  }\n"]);return _e=function(){return e},e}var $e,et,tt,nt,at=d.a.div(_e()),rt=d.a.div(Xe()),ot=d.a.div(Ze()),it=(d.a.div(He()),d.a.div(ze())),ct=Object(d.a)(U.a)(Pe()),st=(d.a.div(We()),Object(d.a)(xe.a)(Le())),ut=function(e){function t(){var e,n;Object(g.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).writingNotificationTimeout=null,n.writingNotificationDelay=3,n.state={message:""},n.onMessageChange=function(e){var t=e.target.value;n.setState({message:t}),n.scheduleWritingNotification(t)},n.onKey=function(e){if("Enter"===e.key){var t=n.props,a=t.user;(0,t.sendMessage)({user:a,text:n.state.message,date:new Date,type:"own"}),n.setState({message:""}),clearTimeout(n.writingNotificationTimeout),n.writingNotificationTimeout=null}},n}return Object(m.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.user,n=e.history;e.isInitiator,e.shareUrl;if(!t.id)return n.push("/")}},{key:"scheduleWritingNotification",value:function(e){var t=this;if(!e){var n=this.props,a=n.sendClearWritingNotification,r=n.user;return clearTimeout(this.writingNotificationTimeout),this.writingNotificationTimeout=null,void a(r)}this.writingNotificationTimeout||(console.log("Schedule writing notification..."),this.writingNotificationTimeout=setTimeout(function(){var e=t.props,n=e.user;(0,e.sendWritingNotification)(n)},1e3*this.writingNotificationDelay))}},{key:"getInitNofication",value:function(){var e=this.props,t=e.user,n=e.isInitiator,a=e.shareUrl;return n?function(e){var t=e.user,n=e.shareUrl,a=r.a.createElement(ie.a,{"data-clipboard-text":n,component:"a"},r.a.createElement(st,{id:"share-link"},r.a.createElement(G.a,{style:{fontSize:"16px"}},"insert_link")));return r.a.createElement(Ye,{text:"".concat(t.name," created chat."),date:new Date,actionButton:a})}({user:t,shareUrl:a}):function(e){return r.a.createElement(Ye,{text:"".concat(e.name," joined chat."),date:new Date})}(t)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.sending,a=(e.user,e.messages),o=e.notifications;e.isInitiator;return r.a.createElement(at,null,r.a.createElement(rt,null,r.a.createElement(it,null,this.getInitNofication(),a.map(function(e,t){return r.a.createElement(Be,{key:"message-".concat(t),user:e.user,text:e.text,date:e.date,type:e.type})}),o.map(function(e){return r.a.createElement(Be,{key:e.user.id,user:e.user,text:r.a.createElement(ke.a,null),date:e.date,type:"peer"})})),r.a.createElement(ot,null,r.a.createElement(ct,{id:"name",label:"Message",value:this.state.message,onChange:this.onMessageChange,onKeyPress:this.onKey,margin:"normal",autoFocus:!0}),n&&r.a.createElement(H.a,{size:24,className:t.progress}))))}}]),t}(r.a.PureComponent),lt={sendMessage:function(e){return{type:ce,payload:e}},sendWritingNotification:function(e){return{type:se,payload:e}},sendClearWritingNotification:function(e){return{type:ue,payload:e}}},pt=Object(y.compose)(Object(p.withStyles)({progress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}),Object(l.b)(function(e){return{user:B(e),messages:fe(e),notifications:be(e),isInitiator:he(e),shareUrl:me(e)}},lt),j.a)(ut),dt=function(){return r.a.createElement(pt,null)},gt=n(42),ft=n(148),bt=n(23),ht={name:"",avatar:""},mt=Object(bt.a)({},"peer-chat/welcome/set-user",function(e,t){var n=t.payload;return{name:n.name,avatar:n.avatar}}),vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;return t.type in mt?mt[t.type](e,t):ht},kt=n(22),yt={messages:[],writingNotifications:[]},xt=($e={},Object(bt.a)($e,ce,function(e,t){var n=t.payload;return Object(kt.a)({},e,{messages:e.messages.concat([n])})}),Object(bt.a)($e,"peer-chat/chat/add-message",function(e,t){var n=t.payload;return Object(kt.a)({},e,{writingNotifications:e.writingNotifications.filter(function(e){return e.user.id!==n.user.id}),messages:e.messages.concat([n])})}),Object(bt.a)($e,"peer-chat/chat/add-writing-notification",function(e,t){var n=t.payload;return Object(kt.a)({},e,{writingNotifications:e.writingNotifications.concat([n])})}),Object(bt.a)($e,"peer-chat/chat/remove-writing-notification",function(e,t){var n=t.payload;return Object(kt.a)({},e,{writingNotifications:e.writingNotifications.filter(function(e){return e.user.id!==n.user.id})})}),$e),jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0;return t.type in xt?xt[t.type](e,t):e},wt="peer-chat/signaling/init-success",At="peer-chat/signaling/got-remote-signal",Ot={id:"",isInitiator:!1,shareUrl:"",error:""},Et=(et={},Object(bt.a)(et,"peer-chat/signaling/init-failed",function(e,t){var n=t.payload;return Object(kt.a)({},Ot,{error:n.error})}),Object(bt.a)(et,wt,function(e,t){var n=t.payload;return Object(kt.a)({},e,{id:n.id,isInitiator:n.isInitiator,shareUrl:n.shareUrl})}),et),Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;return t.type in Et?Et[t.type](e,t):e},Ct="peer-chat/peers/set-signal",St={id:null,signal:null,peer:null,peers:[]},It=(tt={},Object(bt.a)(tt,Ct,function(e,t){var n=t.payload;return Object(kt.a)({},e,{id:n.id,signal:n.signal})}),Object(bt.a)(tt,"peer-chat/peers/create-local-peer-success",function(e,t){var n=t.payload;return Object(kt.a)({},e,{peer:n.peer})}),tt),Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;return t.type in It?It[t.type](e,t):e},Ut={name:"",avatar:"account_circle"},Bt=(nt={},Object(bt.a)(nt,"peer-chat/user/set-name",function(e,t){var n=t.payload;return Object(kt.a)({},e,{name:n.name})}),Object(bt.a)(nt,"peer-chat/user/set-avatar",function(e,t){var n=t.payload;return Object(kt.a)({},e,{avatar:n.avatar})}),Object(bt.a)(nt,x,function(e,t){var n=t.payload;return Object(kt.a)({},e,{id:n.id})}),nt),Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;return t.type in Bt?Bt[t.type](e,t):e},Gt=Object(y.combineReducers)({welcome:vt,chat:jt,signaling:Nt,peers:Tt,user:Vt}),Rt=n(13),Mt=n.n(Rt),Qt=n(7),Dt=function(e){return{type:wt,payload:e}},Jt=function(e){return{type:"peer-chat/signaling/init-failed",payload:e}},qt=function(e){return{type:"peer-chat/signaling/send-signal-success",payload:e}},Ft=function(e){return{type:"peer-chat/signaling/send-signal-error",payload:e}},Kt=function(e){return{type:At,payload:e}},Yt=n(149),Lt=n.n(Yt),Wt=new(function(){function e(){Object(g.a)(this,e),this.baseUrl="".concat(window.location.protocol,"//").concat(window.location.host),this.id=k()(12),this.initiatorId=this.getInitiatorId(),this.isInitiator=!this.initiatorId,this.onErrorCallback=null,this.shareUrl="",this.isInitiator&&this.setSharingUrl()}return Object(f.a)(e,[{key:"setSharingUrl",value:function(){this.shareUrl="".concat(this.baseUrl,"#").concat(this.id)}},{key:"setSignal",value:function(e){this.signal=e}},{key:"init",value:function(){var e=this;return console.log("PEER ID",this.id),console.log("INITIATOR ID:",this.initiatorId),this.channelName=this.initiatorId||this.id,console.log("CHANNEL",this.channelName),this.hub=Lt()("peer-chat",["https://peer-chat-signalhub.herokuapp.com"]),this.hub.subscribe(this.channelName).on("data",function(t){return e.onSignalMessage(t)}),this.isInitiator||(console.log("Signaling: SEND REQUEST MSG"),this.hub.broadcast(this.channelName,{id:this.id,type:"request"})),this}},{key:"onSignalMessage",value:function(e){console.log("new message received",e);var t=e||{},n=t.signal,a=t.id,r=t.type;a!==this.id&&(this.isInitiator&&"request"===r?this.hub.broadcast(this.channelName,{id:this.id,type:"offer",signal:this.signal}):(this.isInitiator||"request"!==r)&&n&&"function"===typeof this.onRemoteSignalCallback&&this.onRemoteSignalCallback(n))}},{key:"send",value:function(e){this.hub.broadcast(this.channelName,Object(kt.a)({id:this.id},e))}},{key:"onRemoteSignal",value:function(e){this.onRemoteSignalCallback=e}},{key:"getInitiatorId",value:function(){return window.location.hash.substr(1)}}]),e}()),Pt=Mt.a.mark(Xt),zt=Mt.a.mark(_t),Ht=Mt.a.mark($t);function Zt(e){return Object(gt.b)(function(t){return e.onRemoteSignal(function(e){console.log("signaling: got remote signal"),t({type:"remote-signal",data:e})}),function(){console.log("Unsubscribe from signaling event channel.")}})}function Xt(){var e,t,n,a;return Mt.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,console.log("init signaling"),Wt.init(),console.log("success, id:",Wt.id),r.next=6,Object(Qt.d)(Dt({id:Wt.id,isInitiator:Wt.isInitiator,shareUrl:Wt.shareUrl}));case 6:return e=Zt(Wt),r.next=9,Object(Qt.f)(e);case 9:t=r.sent,n=t.type,a=t.data,console.log('Got signaling CHANNEL "'.concat(n,'" DATA'),a),r.t0=n,r.next="remote-signal"===r.t0?16:19;break;case 16:return r.next=18,Object(Qt.d)(Kt({signal:a}));case 18:return r.abrupt("break",19);case 19:r.next=25;break;case 21:return r.prev=21,r.t1=r.catch(0),r.next=25,Object(Qt.d)(Jt({error:r.t1.message||"Unknown error."}));case 25:case"end":return r.stop()}},Pt,this,[[0,21]])}function _t(e){var t;return Mt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,console.log("send local signal to remote peer",t),Wt.setSignal(t.signal),Wt.send({signal:t.signal}),n.next=7,Object(Qt.d)(qt(t));case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,Object(Qt.d)(Ft({error:n.t0.message||"Unknown error."}));case 13:case"end":return n.stop()}},zt,this,[[1,9]])}function $t(){return Mt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("signaling saga"),e.next=3,Object(Qt.g)(Ct,_t);case 3:return e.next=5,Object(Qt.b)(Xt);case 5:case"end":return e.stop()}},Ht,this)}var en=function(e){return e.peers.peer},tn=function(e){return e.peers.signal},nn=function(e){return{type:"peer-chat/peers/create-local-peer-success",payload:e}},an=function(e){return{type:"peer-chat/peers/create-local-peer-failed",payload:e}},rn=function(e){return{type:"peer-chat/peers/create-remote-peer-success",payload:e}},on=function(e){return{type:"peer-chat/peers/create-remote-peer-failed",payload:e}},cn=function(e){return{type:Ct,payload:e}},sn=n(91),un=n.n(sn);window.SimplePeer=un.a;var ln=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isInitiator,a=void 0!==n&&n,r=t.id,o=t.signal;Object(g.a)(this,e),this.isInitiator=a,this.remoteSignal=o,this.id=r}return Object(f.a)(e,[{key:"init",value:function(){return this.peer=new un.a({initiator:this.isInitiator,trickle:!1}),this.setPeerEvents(),this}},{key:"setPeerEvents",value:function(){var e=this;console.log("set peer events"),this.peer.on("error",function(t){console.log("error",t),"function"===typeof e.onErrorCallback&&e.onErrorCallback(t)}),this.peer.on("close",function(t){console.log("close",t),e.reconnect()}),this.peer.on("signal",function(t){console.log("SIGNAL",JSON.stringify(t)),e.signal=t,"function"===typeof e.onSignalCallback&&e.onSignalCallback({signal:t,id:e.id})}),this.peer.on("connect",function(){console.log("--- CONNECT ---"),"function"===typeof e.onConnectCallback&&e.onConnectCallback()}),this.peer.on("data",function(t){console.log("data: "+t),"function"===typeof e.onDataCallback&&e.onDataCallback(t)}),window.peer=this.peer}},{key:"reconnect",value:function(){console.log("RECONNECT"),this.destroy(),this.init()}},{key:"onError",value:function(e){return this.onErrorCallback=e,this}},{key:"onData",value:function(e){return this.onDataCallback=e,this}},{key:"onSignal",value:function(e){return this.onSignalCallback=e,this}},{key:"onConnect",value:function(e){return this.onConnectCallback=e,this}},{key:"send",value:function(e){if(this.peer.connected){var t=JSON.stringify({payload:e});console.log("Peer SEND",t),this.peer.send(t)}}},{key:"connect",value:function(e){this.peer.signal(e)}},{key:"destroy",value:function(){this.peer.destroy()}}]),e}();window.Peer=ln;var pn=ln,dn=Mt.a.mark(yn),gn=Mt.a.mark(xn),fn=Mt.a.mark(wn),bn=Mt.a.mark(An),hn=Mt.a.mark(On),mn=Mt.a.mark(En),vn=Mt.a.mark(Nn);function kn(e){return Object(gt.b)(function(t){return e.onSignal(function(e){t({type:"signal",data:e})}).onData(function(e){t({type:"data",data:e})}).onConnect(function(){t({type:"connect"})}).onError(function(e){console.log("Got ERROR from Peer:",e),t({type:"error",data:e})}),function(){console.log("Channel unsubscribe.")}})}function yn(e){var t,n,a,r;return Mt.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=e.data,n=JSON.parse(t),a=n.payload,console.log("handle remote peer data",a),o.prev=3,o.t0=a.type,o.next="message"===o.t0?7:"writing_notification"===o.t0?12:"clear_writing_notification"===o.t0?16:20;break;case 7:return console.log("-- MESSAGE",a.data),r=Object(kt.a)({},a.data,{type:"peer"}),o.next=11,Object(Qt.d)(le(r));case 11:return o.abrupt("break",20);case 12:return console.log("-- WRITING NOTIFICATION",a.data),o.next=15,Object(Qt.d)(de(a.data));case 15:return o.abrupt("break",20);case 16:return console.log("-- CLEAR WRITING NOTIFICATION",a.data),o.next=19,Object(Qt.d)(ge(a.data));case 19:return o.abrupt("break",20);case 20:o.next=25;break;case 22:o.prev=22,o.t1=o.catch(3),console.log("Error adding message",o.t1);case 25:case"end":return o.stop()}},dn,this,[[3,22]])}function xn(e){var t,n,a,r,o,i,c,s;return Mt.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,u.prev=1,console.log("create remote peer",t),n=t.signal,t.id,u.next=6,Object(Qt.e)(en);case 6:return(a=u.sent).connect(n),r=kn(a),u.next=11,Object(Qt.e)(tn);case 11:o=u.sent,u.prev=12;case 13:return u.next=16,Object(Qt.f)(r);case 16:i=u.sent,c=i.type,s=i.data,console.log('[ REMOTE PEER ]: GOT "'.concat(c,'" DATA from EVENT CHANNEL:'),s),u.t0=c,u.next="signal"===u.t0?23:"connect"===u.t0?29:"data"===u.t0?31:"error"===u.t0?34:36;break;case 23:if(!o){u.next=26;break}return console.log("ALREADY GOT SIGNAL!"),u.abrupt("return");case 26:return u.next=28,Object(Qt.d)(cn(s));case 28:return u.abrupt("break",36);case 29:return console.log("Peer connected!"),u.abrupt("break",36);case 31:return u.next=33,yn({type:c,data:s});case 33:return u.abrupt("break",36);case 34:return console.log("got error from remotePeer event channel",s),u.abrupt("break",36);case 36:u.next=13;break;case 38:u.next=43;break;case 40:u.prev=40,u.t1=u.catch(12),console.log("Event channel error",u.t1);case 43:return u.next=45,Object(Qt.d)(rn({peer:"TODO"}));case 45:u.next=51;break;case 47:return u.prev=47,u.t2=u.catch(1),u.next=51,Object(Qt.d)(on({error:u.t2.message||"Unknown error."}));case 51:case"end":return u.stop()}},gn,this,[[1,47],[12,40]])}function jn(e){return Object(gt.b)(function(t){return e.onSignal(function(e){t({type:"signal",data:e})}).onData(function(e){console.log("Got DATA from Peer:",e),t({type:"data",data:e})}).onError(function(e){console.log("Got ERROR from Peer:",e),t({type:"error",data:e})}),function(){console.log("Channel unsubscribe.")}})}function wn(e){var t,n,a,r,o,i;return Mt.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,console.log("create local peer",t),(n=new pn({id:t.id,isInitiator:t.isInitiator})).init(),c.next=7,Object(Qt.d)(nn({peer:n}));case 7:a=jn(n),c.prev=8;case 9:return c.next=12,Object(Qt.f)(a);case 12:r=c.sent,o=r.type,i=r.data,console.log('[ LOCAL PEER ]: GOT "'.concat(o,'" DATA from EVENT CHANNEL:'),i),c.t0=o,c.next="signal"===c.t0?19:"data"===c.t0?22:"error"===c.t0?23:25;break;case 19:return c.next=21,Object(Qt.d)(cn(i));case 21:case 22:return c.abrupt("break",25);case 23:return console.log("got error from localPeer event channel",i),c.abrupt("break",25);case 25:c.next=9;break;case 27:c.next=32;break;case 29:c.prev=29,c.t1=c.catch(8),console.log("Event channel error",c.t1);case 32:c.next=38;break;case 34:return c.prev=34,c.t2=c.catch(1),c.next=38,Object(Qt.d)(an({error:c.t2.message||"Unknown error."}));case 38:case"end":return c.stop()}},fn,this,[[1,34],[8,29]])}function An(e){var t;return Mt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,console.log("PEER Saga: send message",t),n.next=4,Object(Qt.e)(en);case 4:n.sent.send({type:"message",data:Object(kt.a)({},t)});case 6:case"end":return n.stop()}},bn,this)}function On(e){var t;return Mt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,console.log("PEER Saga: send writing notification",t),n.next=4,Object(Qt.e)(en);case 4:n.sent.send({type:"writing_notification",data:{user:t,date:new Date}});case 6:case"end":return n.stop()}},hn,this)}function En(e){var t;return Mt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,console.log("PEER Saga: send clear writing notification",t),n.next=4,Object(Qt.e)(en);case 4:n.sent.send({type:"clear_writing_notification",data:{user:t,date:new Date}});case 6:case"end":return n.stop()}},mn,this)}function Nn(){return Mt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("peers saga"),e.next=3,Object(Qt.g)(wt,wn);case 3:return e.next=5,Object(Qt.g)(At,xn);case 5:return e.next=7,Object(Qt.g)(ce,An);case 7:return e.next=9,Object(Qt.g)(se,On);case 9:return e.next=11,Object(Qt.g)(ue,En);case 11:case"end":return e.stop()}},vn,this)}var Cn=Mt.a.mark(In),Sn=Mt.a.mark(Tn);function In(e){var t;return Mt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,n.prev=1,console.log("send message"),Object(Qt.d)(le({message:t.message})),n.next=10;break;case 6:return n.prev=6,n.t0=n.catch(1),n.next=10,Object(Qt.d)(pe({message:t.message,error:n.t0}));case 10:case"end":return n.stop()}},Cn,this,[[1,6]])}function Tn(){return Mt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("chat saga"),e.next=3,Object(Qt.h)(ce,In);case 3:case"end":return e.stop()}},Sn,this)}var Un=Mt.a.mark(Bn);function Bn(){return Mt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("load sagas"),e.next=3,Object(Qt.a)([Object(Qt.c)(Nn),Object(Qt.c)($t),Object(Qt.c)(Tn)]);case 3:case"end":return e.stop()}},Un,this)}var Vn=Object(gt.a)(),Gn=Object(ft.composeWithDevTools)(Object(y.applyMiddleware)(Vn)),Rn=Object(y.createStore)(Gt,Gn);Vn.run(Bn);var Mn=Rn;function Qn(){var e=Object(c.a)(["\n  width: 100%;\n  height: 100%;\n  background: black;\n  opacity: 0.7;\n"]);return Qn=function(){return e},e}function Dn(){var e=Object(c.a)(["\n  background: url(",") no-repeat;\n  background-size: cover;\n  background-position: center;\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  z-index: -1;\n  filter: blur(5px);\n"]);return Dn=function(){return e},e}var Jn=d.a.div(Dn(),function(){var e=Math.floor(33*Math.random())+1;return n(359)("./background".concat(e,".jpg"))}()),qn=d.a.div(Qn()),Fn=function(){return r.a.createElement(Jn,null,r.a.createElement(qn,null))};function Kn(){var e=Object(c.a)(["\n  h1 {\n    font-family: 'Playfair Display', serif;\n  }\n"]);return Kn=function(){return e},e}var Yn=d.a.div(Kn()),Ln=function(){return r.a.createElement(Yn,null,r.a.createElement("h1",null,"Chateer"))};function Wn(){var e=Object(c.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Wn=function(){return e},e}var Pn=Object(p.createMuiTheme)({typography:{useNextVariants:!0},palette:{type:"dark"}}),zn=d.a.div(Wn()),Hn=function(){return r.a.createElement(p.MuiThemeProvider,{theme:Pn},r.a.createElement(l.a,{store:Mn},r.a.createElement(Fn,null),r.a.createElement(zn,null,r.a.createElement(Ln,null),r.a.createElement(s.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{path:"/",exact:!0,component:re}),r.a.createElement(u.a,{path:"/chat",component:dt}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Hn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[151,2,1]]]);
//# sourceMappingURL=main.dd3a18a1.chunk.js.map